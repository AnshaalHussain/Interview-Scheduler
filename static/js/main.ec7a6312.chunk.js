(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,n){e.exports=n(49)},24:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(18),c=n.n(i),s=(n(24),n(25),n(4)),o=n.n(s);function l(e){var t,n=o()("day-list__item",{"day-list__item--selected":e.selected},{"day-list__item--full":!e.spots});return r.a.createElement("li",{className:n,onClick:function(){return e.setDay(e.name)}},r.a.createElement("h2",{className:"text--regular"},e.name),r.a.createElement("h3",{className:"text--light"},0===(t=e.spots)?"no spots remaining":1===t?"1 spot remaining":"".concat(t," spots remaining")))}function m(e){var t=e.days,n=[];for(var a in t)n.push(t[a]);console.log("srrayData",n);var i=n.map(function(t){return r.a.createElement(l,{key:t.id,name:t.name,spots:t.spots,selected:t.name===e.value,setDay:e.setDay})});return r.a.createElement("ul",null,i)}function u(e){return r.a.createElement("header",{className:"appointment__time"},r.a.createElement("h4",{className:"text--semi-bold"},e.time),r.a.createElement("hr",{className:"appointment__separator"}))}function p(e){return r.a.createElement("main",{className:"appointment__card appointment__card--show"},r.a.createElement("section",{className:"appointment__card-left"},r.a.createElement("h2",{className:"text--regular"},e.student&&e.student),r.a.createElement("section",{className:"interviewer"},r.a.createElement("h4",{className:"text--light"},"Interviewer"),r.a.createElement("h3",{className:"text--regular"},e.interviewer&&e.interviewer.name))),r.a.createElement("section",{className:"appointment__card-right"},r.a.createElement("section",{className:"appointment__actions"},r.a.createElement("img",{className:"appointment__actions-button",src:"images/edit.png",alt:"Edit",onClick:function(){return e.onEdit()}}),r.a.createElement("img",{className:"appointment__actions-button",src:"images/trash.png",alt:"Delete",onClick:function(){return e.onDelete(e.student,e.interviewer)}}))))}function d(e){return r.a.createElement("main",{className:"appointment__add"},r.a.createElement("img",{className:"appointment__add-button",src:"images/add.png",alt:"Add",onClick:e.onAdd}))}var v=n(3);n(26),n(27);function f(e){var t=o()("interviewers__item",{"interviewers__item--selected":e.selected});return r.a.createElement("li",{className:t,onClick:e.setInterviewer},r.a.createElement("img",{className:"interviewers__item-image",src:e.avatar,alt:e.name}),e.selected&&e.name)}function E(e){var t=e.interviewers.map(function(t){return r.a.createElement(f,{key:t.id,avatar:t.avatar,name:t.name,selected:e.value===t.id,setInterviewer:function(){return e.onChange(t.id)}})});return r.a.createElement("section",{className:"interviewers"},r.a.createElement("h4",{className:"interviewers__header text--light"},"Interviewer"),r.a.createElement("ul",{className:"interviewers__list"},t))}n(28);function _(e){var t=o()("button",{"button--confirm":e.confirm,"button--danger":e.danger});return r.a.createElement("button",{className:t,onClick:e.onClick,disabled:e.disabled},e.children)}function g(e){var t=Object(a.useState)(e.interviewer||null),n=Object(v.a)(t,2),i=n[0],c=n[1],s=Object(a.useState)(e.student||""),o=Object(v.a)(s,2),l=o[0],m=o[1];return r.a.createElement("main",{className:"appointment__card appointment__card--create"},r.a.createElement("section",{className:"appointment__card-left"},r.a.createElement("form",{autoComplete:"off",onSubmit:function(e){return e.preventDefault()}},r.a.createElement("input",{className:"appointment__create-input text--semi-bold",name:"name",type:"text",placeholder:"Enter Student Name",value:l,onChange:function(e){return m(e.target.value)}})),r.a.createElement(E,{interviewers:e.interviewers,value:i,onChange:c})),r.a.createElement("section",{className:"appointment__card-right"},r.a.createElement("section",{className:"appointment__actions"},r.a.createElement(_,{danger:!0,onClick:function(){c(""),m(""),e.onCancel()}},"Cancel"),r.a.createElement(_,{confirm:!0,onClick:function(){return e.save(l,i)}},"Save"))))}function w(e){return r.a.createElement("main",{className:"appointment__card appointment__card--confirm"},r.a.createElement("h1",{className:"text--semi-bold"},e.message),r.a.createElement("section",{className:"appointment__actions"},r.a.createElement(_,{danger:!0,onClick:e.onCancel},"Cancel"),r.a.createElement(_,{danger:!0,onClick:function(){return e.onConfirm()}},"Confirm")))}function h(e){return r.a.createElement("main",{className:"appointment__card appointment__card--error"},r.a.createElement("section",{className:"appointment__error-message"},r.a.createElement("h1",{className:"text--semi-bold"},"Error"),r.a.createElement("h3",{className:"text--light"},e.message)),r.a.createElement("img",{className:"appointment__error-close",src:"images/close.png",alt:"Close",onClick:e.onClose}))}n(29);function b(e){return console.log("status",e),r.a.createElement("main",{className:"appointment__card appointment__card--status"},r.a.createElement("img",{className:"appointment__status-image",src:"images/status.png",alt:"Loading"}),r.a.createElement("h1",{className:"text--semi-bold"},e.message))}var N="EMPTY",y="SHOW",O="CREATE",C="SAVING",j="DELETING",k="CONFIRM_DELETE",I="EDIT",D="ERROR_SAVE",x="ERROR_DELETE";function S(e){var t=function(e){var t=Object(a.useState)(e),n=Object(v.a)(t,2),r=n[0],i=n[1],c=Object(a.useState)([e]),s=Object(v.a)(c,2),o=s[0];return s[1],{mode:r,transition:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&o.pop(),i(e),o.push(e)},back:function(){o.length>1&&(o.pop(),i(o[o.length-1]))}}}(e.interview?y:N),n=t.mode,i=t.transition,c=t.back;function s(t,n){var a={student:t,interviewer:n};i(C),e.bookInterview(e.id,a).then(function(e){i(y)}).catch(function(e){i(D),console.log(e)})}return r.a.createElement("article",{className:"appointment"},r.a.createElement(u,{time:e.time}),n===N&&r.a.createElement(d,{onAdd:function(){return i(O)}}),n===y&&r.a.createElement(p,{student:e.interview&&e.interview.student,interviewer:e.interview&&e.interview.interviewer,onDelete:function(){return i(k)},onEdit:function(){return i(I)}}),n===C&&r.a.createElement(b,{message:"Saving"}),n===j&&r.a.createElement(b,{message:"Deleting"}),n===O&&r.a.createElement(g,{onCancel:c,save:s,interviewers:e.interviewers}),n===I&&r.a.createElement(g,{onCancel:c,save:s,student:e.student,interviewers:e.interviewers}),n===k&&r.a.createElement(w,{message:"Delete this appointment?",onCancel:function(){return c()},onConfirm:function(){return function(t,n){var a={student:t,interviewer:n};i(j),e.cancelInterview(e.id,a).then(function(e){i(N)}).catch(function(e){i(x),console.log(e)})}(e.student,e.interviewer)}}),n===x&&r.a.createElement(h,{message:"could not delete",onClose:function(){return i(y,!0)}}),n===D&&r.a.createElement(h,{message:"could not save",onClose:function(){return i(N,!0)}}))}n(30);function L(e,t){var n={};if(t){var a=t.interviewer,r=e.interviewers[a];return n.interviewer=r,n.student=t.student,n}return null}var R=n(6),A=n(1),T=n(5),M=n.n(T);c.a.render(r.a.createElement(function(e){var t=function(){var e=Object(a.useState)({day:"Monday",days:[],appointments:[],interviewers:{}}),t=Object(v.a)(e,2),n=t[0],r=t[1],i=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var a in n.days)n.days[a].name===n.day&&(e&&function(){var e=n.days[a].spots-=1,t=Object(A.a)({},n.days,n.days[a].spots=e);r(function(e){return Object(A.a)({},e,{days:t})})}(),t&&function(){var e=n.days[a].spots+=1,t=Object(A.a)({},n.days,n.days[a].spots=e);r(function(e){return Object(A.a)({},e,{days:t})})}())};return Object(a.useEffect)(function(){Promise.all([M.a.get("http://localhost:8001/api/days"),M.a.get("http://localhost:8001/api/appointments"),M.a.get("http://localhost:8001/api/interviewers")]).then(function(e){console.log("ALL",e),r(function(t){return Object(A.a)({},t,{days:e[0].data,appointments:e[1].data,interviewers:e[2].data})})})},[]),{state:n,setDay:function(e){return r(function(t){return Object(A.a)({},t,{day:e})})},bookInterview:function(e,t){var a=Object(A.a)({},n.appointments[e],{interview:Object(A.a)({},t)}),c=Object(A.a)({},n.appointments,Object(R.a)({},e,a));return M.a.put("http://localhost:8001/api/appointments/".concat(e),{interview:t}).then(function(e){i(!0),r(function(e){return Object(A.a)({},e,{appointments:c})})})},cancelInterview:function(e,t){console.log("cancel interview",e,t);var a=Object(A.a)({},n.appointments[e],{interview:null}),c=Object(A.a)({},n.appointments,Object(R.a)({},e,a));return M.a.delete("http://localhost:8001/api/appointments/".concat(e)).then(function(e){i(!1,!0),r(function(e){return Object(A.a)({},e,{appointments:c})})})}}}(),n=t.state,i=t.setDay,c=t.bookInterview,s=t.cancelInterview;console.log("listen",n);var o=function(e,t){var n=t,a=Object.entries(e.days),r=[];for(var i in a)a[i][1].name===n&&r.push(a[i][1]);if(r=r[0]){var c=[];for(var s in e.appointments)c.push(e.appointments[s]);return c.filter(function(e){for(var t in r.appointments)if(e.id===r.appointments[t])return r.appointments[t];return!1})}return[]}(n,n.day).map(function(e){var t=function(e,t){var n=t,a=[],r=Object.entries(e.days);for(var i in r)r[i][1].name===n&&a.push(r[i][1]);if(a=a[0]){var c=[];for(var s in e.interviewers)c.push(e.interviewers[s]);return c.filter(function(e){for(var t in a.interviewers)if(e.id===a.interviewers[t])return a.interviewers[t];return!1})}return[]}(n,n.day);return r.a.createElement(S,Object.assign({key:e.id},e,{interview:L(n,e.interview),bookInterview:c,cancelInterview:s,interviewers:t}))});return r.a.createElement("main",{className:"layout"},r.a.createElement("section",{className:"sidebar"},r.a.createElement("img",{className:"sidebar--centered",src:"images/logo.png",alt:"Interview Scheduler"}),r.a.createElement("hr",{className:"sidebar__separator sidebar--centered"}),r.a.createElement("nav",{className:"sidebar__menu"},r.a.createElement(m,{days:n.days,value:n.day,setDay:i})),r.a.createElement("img",{className:"sidebar__lhl sidebar--centered",src:"images/lhl.png",alt:"Lighthouse Labs"})),r.a.createElement("section",{className:"schedule"},o,r.a.createElement(S,{key:"last",time:"5pm"})))},null),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.ec7a6312.chunk.js.map